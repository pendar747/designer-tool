import { CreateLibraryArgs } from '../../services/library';
import { Library, LibraryComponentPair, NPMConfig, NPMRelease } from '../../types/library';
import { createAsyncAction, createAsyncActionConstant, createUIAction } from '../actionCreators';

export const SHOW_CREATE_LIBRARY_MODAL = 'LIBRARY/SHOW_CREATE_LIBRARY_MODAL';
export const CREATE_LIBRARY = createAsyncActionConstant('LIBRARY/CREATE_LIBRARY');
export const FETCH_LIBRARIES = createAsyncActionConstant('LIBRARY/FETCH_LIBRARIES');
export const UPDATE_LIBRARY = createAsyncActionConstant('LIBRARY/UPDATE_LIBRARY');
export const DELETE_LIBRARY = createAsyncActionConstant('LIBRARY/DELETE_LIBRARY');
export const ADD_COMPONENT = createAsyncActionConstant('LIBRARY/ADD_COMPONENT');
export const FETCH_COMPONENTS = createAsyncActionConstant('LIBRARY/FETCH_COMPONENTS');
export const SELECT_LIBRARY = 'LIBRARY/SELECT_LIBRARY';
export const REMOVE_COMPONENT = createAsyncActionConstant('LIBRARY/REMOVE_COMPONENT');
export const SELECT_THEME = 'THEME/SELECT_THEME';
export const SELECT_COMPONENT = 'THEME/SELECT_COMPONENT';
export const FETCH_NPM_CONFIG = createAsyncActionConstant('LIBRARY/FETCH_NPM_CONFIG');
export const UPDATE_NPM_CONFIG = createAsyncActionConstant('LIBRARY/UPDATE_NPM_CONFIG');
export const FETCH_NPM_RELEASES = createAsyncActionConstant('LIBRARY/FETCH_NPM_RELEASES');
export const CREATE_NPM_RELEASE = createAsyncActionConstant('LIBRARY/CREATE_NPM_RELEASE');

export const showEditLibraryModalAction = createUIAction<{ show: boolean, libraryId?: string }>(SHOW_CREATE_LIBRARY_MODAL);
export const createLibraryAction = createAsyncAction<CreateLibraryArgs, Library, void>(CREATE_LIBRARY);
export const fetchUserLibrariesAction = createAsyncAction<void, Library[], void>(FETCH_LIBRARIES);
export const updateLibraryAction = createAsyncAction<{ library: Library }, { library: Library }>(UPDATE_LIBRARY);
export const deleteLibraryAction = createAsyncAction<{ libraryId: string }, { libraryId: string }>(DELETE_LIBRARY);
export const addComponentAction = createAsyncAction<LibraryComponentPair, LibraryComponentPair>(ADD_COMPONENT);
export const fetchComponentsAction = createAsyncAction<{ libraryId: string }, { libraryId: string, componentIds: string[] }>(FETCH_COMPONENTS);
export const selectLibraryAction = createUIAction<{ libraryId: string }>(SELECT_LIBRARY);
export const removeComponentAction = createAsyncAction<LibraryComponentPair, LibraryComponentPair>(REMOVE_COMPONENT);
export const selectThemeAction = createUIAction<{ libraryId: string, themeId: string }>(SELECT_THEME);
export const selectComponentAction = createUIAction<{ componentId: string }>(SELECT_COMPONENT);
export const fetchNpmConfigAction = createAsyncAction<{ libraryId: string }, { libraryId: string, config: NPMConfig }>(FETCH_NPM_CONFIG);
export const updateNpmConfigAction = createAsyncAction<{ libraryId: string, config: NPMConfig }, { libraryId: string, config: NPMConfig }>(UPDATE_NPM_CONFIG);
export const fetchNpmReleasesAction = createAsyncAction<{ libraryId: string }, { libraryId: string, releases: NPMRelease[] }>(FETCH_NPM_RELEASES);
export const createNpmReleaseAction = createAsyncAction<{ libraryId: string, version: string }, { release: NPMRelease }>(CREATE_NPM_RELEASE);